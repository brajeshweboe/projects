<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://ofbiz.apache.org/Widget-Screen" xsi:schemaLocation="http://ofbiz.apache.org/Widget-Screen http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="PerformInvoicePDF">
        <section>
            <actions>
                <!-- base/top/specific map first, then more common map added for shared labels -->
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="picklistId" from-field="parameters.picklistId"/>
                <set field="titleProperty" value="AccountingInvoice"/>
                <script location="component://gaadizo/groovyScripts/order/CompanyHeader.groovy"/>
                <script location="component://gaadizo/groovyScripts/invoice/PerformInvoice.groovy"/>
            </actions>
           <widgets>
                <decorator-screen name="InvoicePdfDecorator" >
                    <!-- at the top left of every page we put the logo and company information -->
                    <decorator-section name="topContent">
                        <section>
                            <widgets>
                                 <platform-specific><xsl-fo><html-template location="component://gaadizo/template/invoice/pdf/perform/companyLogo.fo.ftl"/></xsl-fo></platform-specific>
                            </widgets>
                        </section>
                    </decorator-section>
                    <!-- at the top right of every page we put the order information -->
                    <decorator-section name="topRight">
                        <section>
                            <widgets>
                            <platform-specific><xsl-fo><html-template location="component://gaadizo/template/invoice/pdf/perform/companyHeader.fo.ftl"/></xsl-fo></platform-specific>
                                <!-- <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/invoice/pdf/perform/orderReportHeaderInfo.fo.ftl"/></xsl-fo>
                                </platform-specific> -->
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <!-- the contach mechanisms, terms, payment and shipping methods are shown in the first page -->
                                <!-- <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/invoice/pdf/perform/orderReportContactMechs.fo.ftl"/></xsl-fo>
                                </platform-specific> -->
                                <!-- 
                                order items and totals
                                <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/invoice/pdf/perform/orderReportBody.fo.ftl"/></xsl-fo>
                                </platform-specific>
                                return policies and notes are shown in the last page
                                <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/invoice/pdf/perform/orderReportConditions.fo.ftl"/></xsl-fo>
                                </platform-specific> -->
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
           
        </section>
    </screen>
   <screen name="InvoicePDF">
        <section>
            <actions>
                <!-- base/top/specific map first, then more common map added for shared labels -->
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="picklistId" from-field="parameters.picklistId"/>
                <set field="titleProperty" value="AccountingInvoice"/>
                <script location="component://facility/webapp/facility/WEB-INF/actions/invoice/EditInvoice.groovy"/>
                <script location="component://party/webapp/partymgr/WEB-INF/actions/party/GetMyCompany.groovy"/>
            </actions>
            <widgets>
                <section>
                    <condition>
                        <or>
                            <if-service-permission service-name="acctgBasePermissionCheck" main-action="VIEW"/>
                            <!-- can always see own invoice -->
                            <if-compare field="invoice.partyIdFrom" operator="equals" value="${userLogin.partyId}"/>
                            <if-compare field="invoice.partyId" operator="equals" value="${userLogin.partyId}"/>
                            <!-- or is a contact of a company who owns the invoice-->
                            <if-compare field="invoice.partyIdFrom" operator="equals" value="${myCompanyId}"/>
                            <if-compare field="invoice.partyId" operator="equals" value="${myCompanyId}"/>
                        </or>
                    </condition>
            
                     <widgets>
                        <platform-specific>
                            <xsl-fo><html-template location="component://gaadizo/template/invoice/pdf/invoiceReport.fo.ftl"/></xsl-fo>
                        </platform-specific>
                        </widgets>
                </section>
            </widgets>
           
        </section>
    </screen>
    <screen name="JobCardPDFO">
        <section>
            <actions>
                <!-- base/top/specific map first, then more common map added for shared labels -->
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="picklistId" from-field="parameters.picklistId"/>
                <set field="titleProperty" value="AccountingInvoice"/>
                <script location="component://party/groovyScripts/party/GetMyCompany.groovy"/>
            </actions>
            <widgets>
                <section>
                     <widgets>
                        <platform-specific>
                            <xsl-fo><html-template location="component://gaadizo/template/invoice/pdf/performInvoiceReport.fo.ftl"/></xsl-fo>
                        </platform-specific>
                        </widgets>
                </section>
            </widgets>
           
        </section>
    </screen>
    <screen name="PdfDecorator">
        <section>
            <actions>
                <property-map resource="scadminUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="logoImageUrl" value="/images/logo-web.png" global="true"/>
                <!--<set field="defaultFontFamily" value="Arial"/>-->
                <set field="jobCardId" value="${parameters.jobCardId}"/>
            </actions>
            <widgets>
                <platform-specific><xsl-fo><html-template location="component://scadmin/webapp/scadmin/pages/shipments/pdf/BOL/${shippingMethodCarrierId}/orderPdfTemplate.fo.ftl"/></xsl-fo></platform-specific>
            </widgets>
        </section>
    </screen>
    <!-- generate a PDF for the order, sharing the same BSH file as the HTML page for viewing the order -->
    <screen name="ShipmentPDF">
    	<section>
    		<actions>
                <set field="titleProperty" value="JobCard"/>
                <script location="component://scadmin/webapp/scadmin/WEB-INF/actions/common/CompanyHeader.groovy"/>
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
                <script location="component://scadmin/webapp/scadmin/WEB-INF/actions/shipment/ShipmentPdf.groovy"/>
                <set field="carrierPartyId" value="${parameters.shippingMethodName}"/>
                <set field="shippingMethodCarrierId" value="${parameters.shippingMethodCarrierId}"/>
                <set from-scope="screen" field="isFrenchLocale" from-field="customLocale"/>
            </actions>
    		<widgets>
    			<include-screen name="ShipmentPDF_content"/>
    		</widgets>
    	</section>
    </screen>
    <screen name="ShipmentPDF_content">
        <section>
            <!-- Include it for foreign Shipper  -->
            <widgets>
                <decorator-screen name="ShipmentPdfDecorator" >
                    <!-- at the top consignment information -->
                    <decorator-section name="topBody">
                        <include-screen name="ShipmentPDF_TopBody"/>
                    </decorator-section>
                    <decorator-section name="bottomBody">
                        <include-screen name="ShipmentPDF_BottomBody"/>
                	</decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                            	<!-- Section 1 -->
	                                <include-screen name="ShipmentPDF_Body"/>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
         	</widgets>
        </section>
    </screen>
    <screen name="ShipmentPDF_TopBody">
    	<section>
              <widgets>
                  <platform-specific>
                      <xsl-fo><html-template location="component://scadmin/webapp/scadmin/pages/shipments/pdf/BOL/${shippingMethodCarrierId}/orderReportHeaderInfo.fo.ftl"/></xsl-fo>
                  </platform-specific>
                  <!-- the contach mechanisms, terms, payment and shipping methods are shown in the first page -->
	    		<platform-specific>
	                <xsl-fo><html-template location="component://scadmin/webapp/scadmin/pages/shipments/pdf/BOL/${shippingMethodCarrierId}/orderReportContactMechs.fo.ftl"/></xsl-fo>
	            </platform-specific>
              </widgets>
          </section>
    </screen>
    <screen name="ShipmentPDF_Body">
    	<section>
	    	<widgets>
	    		
	            <!-- order items and totals -->
	            <platform-specific>
	                <xsl-fo><html-template location="component://scadmin/webapp/scadmin/pages/shipments/pdf/BOL/${shippingMethodCarrierId}/orderReportBody.fo.ftl"/></xsl-fo>
	            </platform-specific>
	    	</widgets>
    	</section>
    </screen>
    <screen name="ShipmentPDF_BottomBody">
    	<section>
              <widgets>
              <!-- return policies and notes are shown in the last page -->
                  <platform-specific>
                      <xsl-fo><html-template location="component://scadmin/webapp/scadmin/pages/shipments/pdf/BOL/${shippingMethodCarrierId}/orderReportConditions.fo.ftl"/></xsl-fo>
                  </platform-specific>
              </widgets>
          </section>
    </screen>
    
    <screen name="OrderPdfDecorator">
        <section>
            <actions>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="logoImageUrl" value="/images/ofbiz_logo.gif" global="true"/>
                <!--<set field="defaultFontFamily" value="Arial"/>-->
            </actions>
            <widgets>
                <platform-specific><xsl-fo><html-template location="component://gaadizo/template/ordermanagement/pdf/orderPdfTemplate.fo.ftl"/></xsl-fo></platform-specific>
            </widgets>
        </section>
    </screen>
    
	<screen name="SimpleOrderPdfDecorator">
        <section>
            <actions>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="logoImageUrl" value="/images/ofbiz_logo.gif" global="true"/>
                <!--<set field="defaultFontFamily" value="Arial"/>-->
            </actions>
            <widgets>
                <platform-specific><xsl-fo><html-template location="component://gaadizo/template/ordermanagement/pdf/simplePdfTemplate.fo.ftl"/></xsl-fo></platform-specific>
            </widgets>
        </section>
    </screen>
	
    <screen name="JobCardPDF">
        <section>
            <actions>
                <set field="titleProperty" value="OrderOrder"/>
                <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				 <script location="component://gaadizo/groovyScripts/order/CompanyHeader.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="OrderPdfDecorator" >
                    <!-- at the top left of every page we put the logo and company information -->
                    <decorator-section name="topLeft">
                        <section>
                            <widgets>
                                 <platform-specific><xsl-fo><html-template location="component://gaadizo/template/ordermanagement/pdf/companyLogo.fo.ftl"/></xsl-fo></platform-specific>
                            </widgets>
                        </section>
                    </decorator-section>
                    <!-- at the top right of every page we put the order information -->
                    <decorator-section name="topRight">
                        <section>
                            <widgets>
                            <platform-specific><xsl-fo><html-template location="component://gaadizo/template/ordermanagement/pdf/companyHeader.fo.ftl"/></xsl-fo></platform-specific>
                                <!-- <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/ordermanagement/pdf/orderReportHeaderInfo.fo.ftl"/></xsl-fo>
                                </platform-specific> -->
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <!-- the contach mechanisms, terms, payment and shipping methods are shown in the first page -->
                                <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/ordermanagement/pdf/orderReportContactMechs.fo.ftl"/></xsl-fo>
                                </platform-specific>
                                <!-- 
                                order items and totals
                                <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/ordermanagement/pdf/orderReportBody.fo.ftl"/></xsl-fo>
                                </platform-specific>
                                return policies and notes are shown in the last page
                                <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/ordermanagement/pdf/orderReportConditions.fo.ftl"/></xsl-fo>
                                </platform-specific> -->
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="CompanyLogo">
        <section>
            <actions>
                <script location="component://scadmin/webapp/scadmin/WEB-INF/actions/common/CompanyHeader.groovy"/>
            </actions>
            <widgets>
                <platform-specific><xsl-fo><html-template location="component://gaadizo/template/ordermanagement/pdf/companyHeader.fo.ftl"/></xsl-fo></platform-specific>
            </widgets>
        </section>
    </screen>
    
     <screen name="InvoicePdfDecorator">
        <section>
            <actions>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="logoImageUrl" value="/images/ofbiz_logo.gif" global="true"/>
                <!--<set field="defaultFontFamily" value="Arial"/>-->
            </actions>
            <widgets>
                <platform-specific><xsl-fo><html-template location="component://gaadizo/template/invoice/pdf/orderPdfTemplate.fo.ftl"/></xsl-fo></platform-specific>
            </widgets>
        </section>
    </screen>
    <!--  screen name="CompanyInfo">
        <section>
            <actions>
                <script location="component://scadmin/webapp/scadmin/WEB-INF/actions/common/CompanyHeader.groovy"/>
                <property-map resource="scadminUiLabels" map-name="uiLabelMap" global="true"/>
            </actions>
            <widgets>
                <platform-specific><xsl-fo><html-template location="component://gaadizo/template/ordermanagement/pdf/companyHeader.fo.ftl"/></xsl-fo></platform-specific>
            </widgets>
        </section>
    </screen -->    
    
    <screen name="InvoicePDF">
        <section>
            <actions>
                <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="titleProperty" value="AccountingInvoice"/>
                <script location="component://accounting/groovyScripts/invoice/EditInvoice.groovy"/>
                <script location="component://party/groovyScripts/party/GetMyCompany.groovy"/>
            </actions>
            <widgets>
                <section>
                    <condition>
                        <or>
                            <if-service-permission service-name="acctgBasePermissionCheck" main-action="VIEW"/>
                            <!-- can always see own invoice -->
                            <if-compare field="invoice.partyIdFrom" operator="equals" value="${userLogin.partyId}"/>
                            <if-compare field="invoice.partyId" operator="equals" value="${userLogin.partyId}"/>
                            <!-- or is a contact of a company who owns the invoice-->
                            <if-compare field="invoice.partyIdFrom" operator="equals" value="${myCompanyId}"/>
                            <if-compare field="invoice.partyId" operator="equals" value="${myCompanyId}"/>
                        </or>
                    </condition>
                    <widgets>
                        <decorator-screen name="FoReportDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="topLeft">
                                <include-screen name="CompanyLogo" location="component://order/widget/ordermgr/OrderPrintScreens.xml"/>
                            </decorator-section>
                            <decorator-section name="topRight">
                               <platform-specific>
                                    <xsl-fo><html-template location="component://accounting/template/invoice/InvoiceReportHeaderInfo.fo.ftl"/></xsl-fo>
                                </platform-specific>
                            </decorator-section>
                            <decorator-section name="body">
                               <platform-specific>
                                   <xsl-fo><html-template location="component://accounting/template/invoice/InvoiceReportContactMechs.fo.ftl"/></xsl-fo>
                              </platform-specific>
                               <platform-specific>
                                   <xsl-fo><html-template location="component://accounting/template/invoice/InvoiceReportItems.fo.ftl"/></xsl-fo>
                               </platform-specific>
                            </decorator-section>
                        </decorator-screen>
                    </widgets>
                    <fail-widgets>
                        <decorator-screen name="FoReportDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="body">
                                <platform-specific>
                                    <xsl-fo><html-template location="component://accounting/template/invoice/NoAccountingView.fo.ftl"/></xsl-fo>
                                </platform-specific>
                            </decorator-section>
                        </decorator-screen>
                    </fail-widgets>
                </section>
            </widgets>
        </section>
    </screen>
    
    <screen name="OrderPDF">
        <section>
            <actions>
                <set field="titleProperty" value="OrderOrder"/>
                <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				
				<script location="component://gaadizo/groovyScripts/order/CompanyHeader.groovy"/>
                <!-- <script location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/> -->
                <!-- <script location="component://gaadizo/groovyScripts/order/OrderView.groovy"/>
                <script location="component://gaadizo/groovyScripts/order/OrderPdf.groovy"/> -->
                <script location="component://accounting/groovyScripts/invoice/EditInvoice.groovy"/>
                <script location="component://party/groovyScripts/party/GetMyCompany.groovy"/>
                <set field="invoicePurpose" value="TAX INVOICE"/>
            </actions>
            <widgets>
                <decorator-screen name="OrderPdfDecorator" >
                    <!-- at the top left of every page we put the logo and company information -->
                    <decorator-section name="topRight">
                        <section>
                            <widgets>
                                <include-screen name="CompanyInfo"/>
                            </widgets>
                        </section>
                    </decorator-section>
                    <!-- at the top right of every page we put the order information -->
                    <decorator-section name="topLeft">
                        <section>
                            <widgets>
                                <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/invoice/invoicepdf/orderReportHeaderInfo.fo.ftl"/></xsl-fo>
                                </platform-specific>
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                            <platform-specific>
                                   <xsl-fo><html-template location="component://accounting/template/invoice/InvoiceReportContactMechs.fo.ftl"/></xsl-fo>
                              </platform-specific>
                               <platform-specific>
                                   <xsl-fo><html-template location="component://accounting/template/invoice/InvoiceReportItems.fo.ftl"/></xsl-fo>
                               </platform-specific>
                                <!-- the contach mechanisms, terms, payment and shipping methods are shown in the first page -->
                               <!--  <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/invoice/invoicepdf/orderReportContactMechs.fo.ftl"/></xsl-fo>
                                </platform-specific> -->
                                <!-- order items and totals -->
                               <!--  <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/invoice/invoicepdf/orderReportBody.fo.ftl"/></xsl-fo>
                                </platform-specific> -->
                                <!-- return policies and notes are shown in the last page -->
                               <!--  <platform-specific>
                                    <xsl-fo><html-template location="component://gaadizo/template/invoice/invoicepdf/orderReportConditions.fo.ftl"/></xsl-fo>
                                </platform-specific> -->
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="CompanyInfo">
        <section>
            <actions>
                <script location="component://gaadizo/groovyScripts/order/CompanyHeader.groovy"/>
                <property-map resource="GaadizoUiLabels" map-name="uiLabelMap" global="true"/>
            </actions>
            <widgets>
                <platform-specific><xsl-fo><html-template location="component://gaadizo/template/invoice/invoicepdf/companyHeader.fo.ftl"/></xsl-fo></platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="OrderPdfDecorator">
        <section>
            <actions>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="logoImageUrl" value="/images/ofbiz_logo.gif" global="true"/>
                <!--<set field="defaultFontFamily" value="Arial"/>-->
            </actions>
            <widgets>
                <platform-specific><xsl-fo><html-template location="component://gaadizo/template/invoice/invoicepdf/orderPdfTemplate.fo.ftl"/></xsl-fo></platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="CompanyLogo">
        <section>
            <actions>
                <script location="component://gaadizo/groovyScripts/order/CompanyHeader.groovy"/>
            </actions>
            <widgets>
                <platform-specific><xsl-fo><html-template location="component://gaadizo/template/invoice/invoicepdf/companyHeader.fo.ftl"/></xsl-fo></platform-specific>
            </widgets>
        </section>
    </screen>
</screens>